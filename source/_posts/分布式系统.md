---
title: 分布式系统基础知识
tags:
  - 分布式
---

#### 分布式系统带来的问题

- 通信异常
- 网络分区 （脑裂）
- 三态 （成功、失败、超时）
- 节点故障

#### CAP理论

- 一致性

    在分布式系统中，一致性是数据在多个副本之间是否能够保证一致的特性，这里说的一致性和前面说的对等性其实差不多。如果能够在分布式系统中针对某一个数据项的变更成功执行后，所有用户都可以马上读取到最新的值，那么这样的系统就被认为具有【强一致性】。     

- 可用性
        
    可用性指系统提供服务必须一直处于可用状态，对于用户的操作请求总是能够在有限的时间内访问结果。这里的重点是【有限的时间】和【返回结果】为了做到有限的时间需要用到缓存，需要用到负载，这个时候服务器增加的节点是为性能考虑；为了返回结果，需要考虑服务器主备，当主节点出现问题的时候需要备份的节点能最快的顶替上来，千万不能出现OutOfMemory或者其他500，404错误，否则这样的系统我们会认为是不可用的。

- 分区容错性

    分布式系统在遇到任何网络分区故障的时候，仍然需要能够对外提供满足一致性和可用性的服务，除非是整个网络环境都发生了故障。

<!-- more -->  

<font color=red>一个分布式系统不可能同时满足一致性、可用性和分区容错性这三个基本需求，最多只能同时满足其中的两项</font>

![CAP](https://image.tupelo.top/%E5%88%86%E5%B8%83%E5%BC%8F.png)

> 不可能把所有应用全部放到一个节点上，因此架构师的精力往往就花在怎么样根据业务场景在A和C直接寻求平衡；


#### BASE理论

BASE理论：即使无法做到强一致性，但分布式系统可以根据自己的业务特点，采用适当的方式来使系统达到最终的一致性。

- 基本可用
    
    允许损失部分可用、保障系统基本可用。

- 软状态

    允许存在中间状态

- 最终一致性

    所有的数据在经过一段时间的数据同步后，最终能够达到一个一致的状态













